<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <h1>jquery ajax Promise()테스트</h1>
    <script
      src="https://code.jquery.com/jquery-3.6.1.js"
      integrity="sha256-3zlB5s2uwoUzrXK3BT7AX3FyvojsraNFxCc2vC/7pNI="
      crossorigin="anonymous"
    ></script>

    <script>
      // Promise(): 콜백지옥 타파 API
      function callAjax() {
        return new Promise(function (resolve, reject) {
          $.ajax({
            url: "https://api.hnpwa.com/v0/news/1.json",
            success: function (data) {
              resolve(data);
            },
          });
        });
      }

      function fetchData() {
        var result = [];

        // Promise 형태
        //$.ajax().then().catch()

        callAjax() // Promise()객체 리턴 값 저장 되어 있음
          .then(function (data) { // 데이터 요청 성공시 실행
            console.log('데이터호출결과: ', data)
            result = data;
            console.log('함수 결과', result)
          })
          .catch(function(error){
            console.log('에러: ', error)
          });
      }
      fetchData(); // Promise()객체 resolve로 리턴
    </script>
  </body>
</html>
